<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Smooth transition between LightDM and Openbox</title>
        <link rel="stylesheet" href="http://dglava.github.io/en/theme/css/main.css" />
        <link rel="shortcut icon" type="image/png" href="http://dglava.github.io/en/theme/images/favicon.png">

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://dglava.github.io/en/">dglava </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://dglava.github.io/en/category/linux.html">Linux</a></li>
                    <li><a href="http://dglava.github.io/en/category/stvari.html">Stvari</a></li>
                    <li><a href="http://dglava.github.io/en/archives.html">Archive</a></li>
                    <li><a href="https://github.com/dglava"><img src="http://dglava.github.io/en/theme/images/git.png"></a></li>
                    <li><a href="http://www.last.fm/user/dinoglava"><img src="http://dglava.github.io/en/theme/images/lastfm.png"></a></li>
                    <li><a href="http://dglava.github.io/"><img src="http://dglava.github.io/en/theme/images/bs.png"></a></li>
                    <li><a href="http://dglava.github.io/en/"><img src="http://dglava.github.io/en/theme/images/en.png"></a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://dglava.github.io/en/lightdm-openbox.html" rel="bookmark"
           title="Permalink to Smooth transition between LightDM and Openbox">Smooth transition between LightDM and Openbox</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-03-21T00:00:00+01:00">
                Published: Mon, 21 Mar 2016
        </abbr>

<p>In <a href="http://dglava.github.io/en/category/linux.html">Linux</a></p>
<p>tags: <a href="http://dglava.github.io/en/tag/openbox.html">openbox</a> <a href="http://dglava.github.io/en/tag/lightdm.html">lightdm</a> </p>Translations:
        <a href="http://dglava.github.io/en/../lightdm-openbox.html">bs</a>

</footer><!-- /.post-info -->      <p>The ugly transition between LigthDM, or more specifically its GTK greeter,
and Openbox is kind of annoying. A gray background pops up shortly before
the desktop wallpaper gets drawn (assuming you use a wallpaper).</p>
<p>The ugly transition in action:</p>
<video width="320" height="240" controls>
  <source src="http://dglava.github.io/en/../files/login1.webm" type="video/webm">
</video>

<p>Digging around, I found out that Openbox actually
<a href="https://github.com/danakj/openbox/blob/d0ba8806689ea80b6a739122aaf8dac81d2a3e5c/data/autostart/openbox-autostart.in#L3-L12">runs x/e/hsetroot at startup</a>.
to set the background color. To get rid of that ugly, temporary background
during logging in, all you have to do is either delete or comment out the lines
in Openbox's autostart bash script.</p>
<div class="highlight"><pre><span></span># Set a background color
#BG=&quot;&quot;
#if which hsetroot &gt;/dev/null 2&gt;/dev/null; then
#  BG=hsetroot
#elif which esetroot &gt;/dev/null 2&gt;/dev/null; then
#  BG=esetroot
#elif which xsetroot &gt;/dev/null 2&gt;/dev/null; then
#  BG=xsetroot
#fi
#test -z $BG || $BG -solid &quot;#303030&quot;
</pre></div>


<p>On Arch, the file you have to edit is <code>/usr/lib/openbox/openbox-autostart</code>.
Other distributions probably keep it in the same place, but you can find the
autostart's file location by checking the output of</p>
<div class="highlight"><pre><span></span>ps x | grep openbox
</pre></div>


<p>Finally, the transition should be smooth now, especially if your display manager's
background is the same as your desktop background.</p>
<video width="320" height="240" controls>
  <source src="http://dglava.github.io/en/../files/login2.webm" type="video/webm">
</video>
    </div><!-- /.entry-content -->
    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'dglava';
        var disqus_identifier = 'lightdm-openbox.html';
        var disqus_url = 'http://dglava.github.io/en/lightdm-openbox.html';
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//dglava.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the comments.</noscript>
    </div>

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Powered by <a href="http://getpelican.com/">Pelican</a> and <a href="http://python.org">Python</a>. Theme: slightly tweaked <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'dglava';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>