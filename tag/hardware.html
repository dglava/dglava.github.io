<!DOCTYPE html>
<html lang="bs">
<head>
        <meta charset="utf-8" />
        <title>dinoglava - hardware</title>
        <link rel="stylesheet" href="https://dglava.github.io/theme/css/main.css" />
        <link rel="shortcut icon" type="image/png" href="https://dglava.github.io/theme/images/favicon.png">
</head>

<body id="index" class="home">
        <script>
        let day = new Date().getDay();
        document.getElementById("index").style.backgroundImage = "url(https://dglava.github.io/theme/images/p" + day + ".jpg)";
        </script>
        <header id="banner" class="body">
                <h1><a href="https://dglava.github.io/">dinoglava </a></h1>
                <nav><ul>
                    <li><a href="https://dglava.github.io/category/linux.html">Linux</a></li>
                    <li><a href="https://dglava.github.io/category/stvari.html">Stvari</a></li>
                    <li><a href="https://dglava.github.io/archives.html">Arhiva</a></li>
                    <li><a href="https://dglava.github.io/pages/o-bs, en.html">O</a></li>
                    <li><a href="https://github.com/dglava"><img src="https://dglava.github.io/theme/images/git.png"></a></li>
                    <li><a href="http://www.last.fm/user/dinoglava"><img src="https://dglava.github.io/theme/images/lastfm.png"></a></li>
                    <li><a href="https://dglava.github.io/"><img src="https://dglava.github.io/theme/images/bs.png"></a></li>
                    <li><a href="https://dglava.github.io/en/"><img src="https://dglava.github.io/theme/images/en.png"></a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://dglava.github.io/ergo525.html">Genius Ergo 525 miš i Linux</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-08-24T00:00:00+00:00">
                Objavljeno: Sri, 24 Aug 2016
        </abbr>
        <br />
        <abbr class="modified" title="2019-09-15T00:00:00+00:00">
                Ažurirano: Ned, 15 Sep 2019
        </abbr>

<p>Pod: <a href="https://dglava.github.io/category/linux.html">Linux</a></p>
<p>Tagovi: <a href="https://dglava.github.io/tag/genius-ergo.html">genius ergo</a> <a href="https://dglava.github.io/tag/hardware.html">hardware</a> </p>Prevodi:
        <a href="https://dglava.github.io/en/ergo525.html">en</a>

</footer><!-- /.post-info --><p><s>Ne želim ga ureći, ali me ovaj miš već služi 7 godina. Istina, iz dva puta.</s>
<em>Urekao sam ga. Nije poptuno pokvaren, ali je lijevo dugme postalo nepouzdano
nakon dugo vremena</em></p>
<p>Kao i većina uređaja na Linuxu, radi dovoljno dobro već nakon priključivanja.
Prepoznati su svi ekstra dugmići, čak i oni koji nisu radili na Windowsu kao
što je horizontalno skrolovanje sa kolutićem. Stvar koja kvari perfektan
učinak su pobrkani dugmići za naprijed i nazad. Osim toga htio sam staviti
dugmić između "naprijed/nazad" da osvježava stranicu, tj. da se ponaša
kao da sam pritisno F5 (dugmić označen na slici).</p>
<p><img alt="Dugme za F5" src="https://dglava.github.io/images/ergo-mis.jpg" title="Dugmić koji funkcioniše kao F5"></p>
<h3>Pogrešni "naprijed/nazad" dugmići</h3>
<p>Prvi problem, sa pobrkanim dugmićima, je bilo relativno jednostavno
riješiti. Pomoću <em>xinput-a</em> možete saznati trenutni raspored dugmića.</p>
<div class="highlight"><pre><span></span>$ xinput
⎡ Virtual core pointer                      <span class="nv">id</span><span class="o">=</span><span class="m">2</span>    <span class="o">[</span>master pointer  <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
⎜   ↳ Virtual core XTEST pointer                <span class="nv">id</span><span class="o">=</span><span class="m">4</span>    <span class="o">[</span>slave  pointer  <span class="o">(</span><span class="m">2</span><span class="o">)]</span>
⎜   ↳ Genius Ergo Mouse                         <span class="nv">id</span><span class="o">=</span><span class="m">8</span>    <span class="o">[</span>slave  pointer  <span class="o">(</span><span class="m">2</span><span class="o">)]</span>
⎣ Virtual core keyboard                     <span class="nv">id</span><span class="o">=</span><span class="m">3</span>    <span class="o">[</span>master keyboard <span class="o">(</span><span class="m">2</span><span class="o">)]</span>
    ↳ Virtual core XTEST keyboard               <span class="nv">id</span><span class="o">=</span><span class="m">5</span>    <span class="o">[</span>slave  keyboard <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span><span class="m">6</span>    <span class="o">[</span>slave  keyboard <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
    ↳ Power Button                              <span class="nv">id</span><span class="o">=</span><span class="m">7</span>    <span class="o">[</span>slave  keyboard <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
    ↳ AT Translated Set <span class="m">2</span> keyboard              <span class="nv">id</span><span class="o">=</span><span class="m">9</span>    <span class="o">[</span>slave  keyboard <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
    ↳ Genius Ergo Mouse                         <span class="nv">id</span><span class="o">=</span><span class="m">10</span>   <span class="o">[</span>slave  keyboard <span class="o">(</span><span class="m">3</span><span class="o">)]</span>
</pre></div>


<p>Moj miš je Genius Ergo Mouse, a njegov <em>id</em> je 8. <em>xinput</em> ima mnogo
opcija, a nama je interesantna <em>query-state</em> opcija. Pomoću nje možete
vidjeti status uređaja, tj. u našem slučaju status pritisnutih dugmića. Postoje
i drugi načini kako da saznate koje je koje dugme, ali je xinput koristan
jer ga sigurno već imate instaliranog. Dok sam pritisno dugme za naprijed
na mišu ovo je ispis komande (sa izostavljenim neinteresantnim stvarima):</p>
<div class="highlight"><pre><span></span>$ xinput query-state <span class="m">8</span>
...
    button<span class="o">[</span><span class="m">7</span><span class="o">]=</span>up
    button<span class="o">[</span><span class="m">8</span><span class="o">]=</span>down
    button<span class="o">[</span><span class="m">9</span><span class="o">]=</span>up
...
</pre></div>


<p>Istu stvar sam ponovio za "nazad" dugmić, i saznao da je broj 9. Sad kad
znamo koji je broj, možemo koristiti <em>xinput</em> da ih zamjenimo. Prvo
izlistamo sve dugmiće što miš ima sa:</p>
<div class="highlight"><pre><span></span>$ xinput get-button-map <span class="m">8</span>
<span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span> <span class="m">10</span> <span class="m">11</span> <span class="m">12</span> <span class="m">13</span> <span class="m">14</span> <span class="m">15</span>
</pre></div>


<p>Nakon toga zamjenimo mjesta 8 i 9.</p>
<div class="highlight"><pre><span></span>$ xinput set-button-map <span class="m">8</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">9</span> <span class="m">8</span> <span class="m">10</span> <span class="m">11</span> <span class="m">12</span> <span class="m">13</span> <span class="m">14</span> <span class="m">15</span>
</pre></div>


<p>Da bi promjena ostala trajna možete staviti gore navedenu komandu da se
izvrši pri pokretanju X sesije. Meni je draže koristiti Xorg konfiguracioni
fajl. Ovako izgleda (izostavljene stvari nevezane za miš):</p>
<div class="highlight"><pre><span></span><span class="n">Section</span> <span class="ss">&quot;InputClass&quot;</span>
    <span class="n">Identifier</span> <span class="ss">&quot;Ergo Mouse&quot;</span>
    <span class="n">MatchUSBID</span> <span class="ss">&quot;0458:0087&quot;</span>
    <span class="k">Option</span> <span class="ss">&quot;ButtonMapping&quot;</span> <span class="ss">&quot;1 2 3 4 5 6 7 9 8 10&quot;</span>
<span class="n">EndSection</span>
</pre></div>


<p><em>MatchUSBID</em> sam saznao pomoću <em>lsusb</em> i služi za identifikaciju uređaja,
da se postavke primjene za miš. To je onaj par rječi od 4 slova/cifre poslije
ID, sa dvotačkom između.</p>
<div class="highlight"><pre><span></span>$ lsusb
...
Bus <span class="m">002</span> Device <span class="m">002</span>: ID <span class="m">0458</span>:0087 KYE Systems Corp. <span class="o">(</span>Mouse Systems<span class="o">)</span> Ergo 525V Laser Mouse
...
</pre></div>


<h3>Dugmić za F5</h3>
<p>Za mijenjanje funkcije dugmića na mišu sam koristio <em>udev</em> direktno.
Vjerovatno postoji i drugi način (<em>xbindkeys</em> možda), ali mi se <em>udev</em>
način činio mnogo "čistijim". Pronašao sam <a href="http://www.vxnick.com/blog/2014/10/binding-extra-mouse-buttons-on-linux/">ovaj</a>
članak koji objašnjava kako da se izvede sve.</p>
<p>Pomoću <em>evtest</em> programa možemo saznati <em>scancode</em> dugmića.</p>
<div class="highlight"><pre><span></span>$ evtest
...
Event: <span class="nb">time</span> <span class="m">1472069345</span>.467695, <span class="nb">type</span> <span class="m">4</span> <span class="o">(</span>EV_MSC<span class="o">)</span>, code <span class="m">4</span> <span class="o">(</span>MSC_SCAN<span class="o">)</span>, value <span class="m">90006</span>
Event: <span class="nb">time</span> <span class="m">1472069345</span>.467695, <span class="nb">type</span> <span class="m">1</span> <span class="o">(</span>EV_KEY<span class="o">)</span>, code <span class="m">63</span> <span class="o">(</span>KEY_F5<span class="o">)</span>, value <span class="m">1</span>
Event: <span class="nb">time</span> <span class="m">1472069345</span>.467695, -------------- SYN_REPORT ------------
...
</pre></div>


<p><em>Scancode</em> je onaj broj poslije "value", znači za nas je 90006. Opet nam
je potreban i ID što smo koristili maloprije za Xorg konfiguracioni fajl.
Na onom gore blogu piše da koristimo <code>keyboard:usb:vXXXXpXXXX*</code>, gdje X-ovi
predstavljaju naše ID-ove. Međutim nisam imao uspijeha s tim, ali sam našao
rješenje na <a href="http://martins-prolog.blogspot.ba/2014/09/logitech-g600-in-arch-linux.html">ovom</a>
blogu. Treba promjeniti u <code>evdev:input:b*vXXXXpXXXX*</code>. Pokušao sam pronaći
zašto, ali nisam ništa pronašao. Ako neko zna, bilo bi dobro da podijeli.</p>
<p>Sve podatke sam ubacio u fajl pod <code>/etc/udev/hwdb.d/10-genius-mouse.hwdb</code>.
Izgleda ovako:</p>
<div class="highlight"><pre><span></span><span class="n">evdev</span><span class="o">:</span><span class="n">input</span><span class="o">:</span><span class="n">b</span><span class="o">*</span><span class="n">v0458p0087</span><span class="o">*</span>
 <span class="n">KEYBOARD_KEY_90006</span><span class="o">=</span><span class="n">f5</span>
</pre></div>


<p>Posljednji korak je da pokrenete sljedeće komande, da se ažurira i
aktivira udev baza podataka:</p>
<div class="highlight"><pre><span></span><span class="n">udevadm</span> <span class="n">hwdb</span> <span class="c1">--update</span>
<span class="n">udevadm</span> <span class="k">trigger</span>
</pre></div><p><a href="https://dglava.github.io/ergo525.html#disqus_thread">Komentari</a></p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Stranica koristi <a href="http://getpelican.com/">Pelican</a>. Tema: blago izmjenjena <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'dglava';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>